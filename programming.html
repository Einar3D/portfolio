<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mark Salazar - programming</title>

	<link rel="stylesheet" type="text/css" href="style.css">

<script type="text/javascript" src="indexJS.js" defer></script>
</head>
<body>

<h1>Mark Salazar</h1>
<h2>Portfolio Website</h2>

<div class="topnav">
  <a class="active" href="index.html">Home</a>
  <a href="programming.html">Programming</a>
  <a href="unreal.html">Unreal Engine 4</a>
  <a href="animation.html">Animation</a>
<a href="photography.html">Photography</a>
    <a href="about.html">About</a>
</div>
	
	<h3>Programming Projects</h3>

<p>Besides coding this website, I've done a few small projects to learn about Websockets, API's, and C++.  Located below is a simple WebSockets chat application and a Sun Angle Calculator API.</p>



<!--CHAT APP-->

 <div id="chatLinkDiv">
     <h2 id="webChatH2">Web sockets chat app</h2>

     <p>This basic chat app is able to send and receive messages from different devices or browsers.</p>

     <p>It was created using WebSockets, Node.js, and Heroku cloud platforms.</p>  

     <a href="https://websockets-app-exercise.herokuapp.com/">Go to simple chat app</a>
 </div> 

 <div id="canvasContainer" width= 'window.screen.width' height= '600px'>

  <h3 class="glow">Sun Angle Calculator app</h3>
      <canvas id="canvas2" width="150" height="150"></canvas>

  <p>
    This simple app provides the sun angle and related information about the user's location.  
  </p>

  <p>
    JavaScript is utilized to access the client device's coordinates via the Geolocation API found in the internet browser. The data is from SunCalc.org.
  </p>


  <p>
      <!--The below ampersand is code for a down arrow &#11167;-->
    Click the link below to see how high the sun is at your location and more information (If the link is not visible, location permission has not been granted).
  </p>

  <span id="sunLinkPlaceholder"></span>

  </div>

  <script type="text/javascript">
    let canvas2 = document.getElementById('canvas2');
    let ctx2 = canvas2.getContext('2d');

    const element = document.getElementById('some-element-you-want-to-animate');
let start, previousTimeStamp;

let cloudX = 300; 
let cloudY = 150;
let cloudZ = 450;

function step(timestamp) {
  if (start === undefined)
    start = timestamp;
  const elapsed = timestamp - start;

  if (previousTimeStamp !== timestamp) {
    // Math.min() is used here to make sure the element stops at exactly 200px
    const count = Math.min(0.1 * elapsed);
    //PUT ANIMATION HERE

        //SKY BACKGROUND
    ctx2.fillStyle = '#00BFFF';
    ctx2.fillRect(0,0,canvas2.width,canvas2.height);

    //SUN 
    ctx2.beginPath();
    ctx2.arc(canvas2.width/2, canvas2.height/2,50,0,Math.PI*2);
    ctx2.fillStyle = "yellow";
    ctx2.fill();


    //SAVE CANVAS STATE
    ctx2.save();

    //TRANSFORM THE CANVAS
    ctx2.translate(canvas2.width/2,canvas2.height/2);
    ctx2.rotate(count/100);


      //INNER LINES THAT ROTATE

    //12 O'CLOCK
    ctx2.beginPath();
    ctx2.moveTo(0, 0);
    ctx2.lineTo(0, -50);

    //MIDPOINT # 1
    ctx2.moveTo(0, 0);
    ctx2.lineTo(35, 35);

    // 3 O'CLOCK
    ctx2.moveTo(0, 0);
    ctx2.lineTo(50, 0); 

    //MIDPOINT # 2
    ctx2.moveTo(0, 0);
    ctx2.lineTo(35, -35);

    // 6 O'CLOCK
    ctx2.moveTo(0, 0);
    ctx2.lineTo(0, 50); 

      //MIDPOINT # 3
    ctx2.moveTo(0, 0);
    ctx2.lineTo(-35, 35);

    // 9 O'CLOCK
    ctx2.moveTo(0, 0);
    ctx2.lineTo(-50, 0);

    //MIDPOINT # 4
    ctx2.moveTo(0, 0);
    ctx2.lineTo(-35, -35);

    ctx2.strokeStyle = 'yellow';
    ctx2.stroke();

    //TRIANGLES AT THE END OF LINES THAT ROTATE

    //TOP TRIANGLE 

    // 12 O'CLOCK
    ctx2.moveTo(0, -45);
    ctx2.lineTo(-5, -45);
    ctx2.lineTo(0, -80);
    ctx2.lineTo(5, -45);

    //The intermediate coordinates found by formula (radius*cos/sin*angle) in calculator. 

    //3 degree difference used to establish width of arrow.  More precisely, 45 degree midpoint, then 48 and 42 degrees to get arrow side points and 60 length radius, isntead of 50, for midpoint tip/edge

    //MIDPOINT # 2
    ctx2.moveTo(35, 35);
    ctx2.lineTo(33, 37);
    ctx2.lineTo(62, 62);
    ctx2.lineTo(37, 33);

    // 3 O'CLOCK
    ctx2.moveTo(45, 0);
    ctx2.lineTo(45, -5);
    ctx2.lineTo(80, 0);
    ctx2.lineTo(45, 5);

    //Midpoint # 1
    ctx2.moveTo(35, -35);
    ctx2.lineTo(37, -33);
    ctx2.lineTo(62, -62);
    ctx2.lineTo(33, -37);

    // 6 O'CLOCK
    ctx2.moveTo(0, 45);
    ctx2.lineTo(-5, 45);
    ctx2.lineTo(0, 80);
    ctx2.lineTo(5, 45);

    //MIDPOINT # 3
    ctx2.moveTo(-35, 35);
    ctx2.lineTo(-37, 33);
    ctx2.lineTo(-62, 62);
    ctx2.lineTo(-33, 37);

    // 9 O'CLCOK
    ctx2.moveTo(-45, 0);
    ctx2.lineTo(-45, 5);
    ctx2.lineTo(-80, 0);
    ctx2.lineTo(-45, -5);

    //MIDPOINT # 4
    ctx2.moveTo(-35, -35);
    ctx2.lineTo(-37, -33);
    ctx2.lineTo(-62, -62);
    ctx2.lineTo(-33, -37);

    ctx2.fillStyle = 'rgb(255, 255, 51, .7)';
    ctx2.fill();

    //RESTORE STATE
    ctx2.restore();

    //CLOUDS

    // ELLIPSE SYNTAX --> ctx.ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle [, counterclockwise

    //CLOUD X; BOTTOM 
    ctx2.fillStyle = 'rgb(240, 255, 255, .5)';
    ctx2.beginPath();
    ctx2.ellipse(cloudX, 300, 70, 17, 0, 0, Math.PI*2);
    ctx2.fill();

    cloudX--;

    if (cloudX < -50) {
      cloudX = 800; 
    }

    //CLOUD Z; MIDDLE
    ctx2.fillStyle = 'rgb(240, 230, 255, .7)';
    ctx2.beginPath();
    ctx2.ellipse(cloudZ, 175, 90, 10, 0, 0, Math.PI*2);
    ctx2.fill();

    cloudZ--;

    if (cloudZ < -150) {
      cloudZ = 700; 
    }

    //CLOUD Y; TOP
    ctx2.fillStyle = 'rgb(255, 255, 255, .5)';
    ctx2.beginPath();
    ctx2.ellipse(cloudY, 100, 60, 15, 0, 0, Math.PI*2);
    ctx2.fill();
 
    cloudY--;

    if (cloudY < -250){
      cloudY = 500;
    }
    
  }
//window.requestAnimationFrame(step);

}

window.requestAnimationFrame(step);

  </script>

<script type="text/javascript">

//i put the code snippets inside the function below, instead of outside the function.  now it works :)

  if ('geolocation' in navigator) {
    console.log('geolocation available');
    navigator.geolocation.getCurrentPosition(function(position){
      console.log(position.coords.latitude);
      console.log(position.coords.longitude);

       var a = document.createElement('a');
      var linkText = document.createTextNode("Sun Angle Calculator");
      a.appendChild(linkText);
      a.title = "Sun Angle";
      a.href = "https://suncalc.org/#/" + position.coords.latitude + "," + position.coords.longitude + ",17/" + date.getFullYear() + "." + monthCorrected + "." + date.getDate() + "/" + date.getHours() + "." + date.getMinutes() + "/324.0/2";
      document.getElementById("sunLinkPlaceholder").appendChild(a);
    });
  } else {
    console.log('geolocation not available');
  }

//DATE STUFF...
const date = new Date();
const [month, day, year]       = [date.getMonth(), date.getDate(), date.getFullYear()];
const [hour, minutes, seconds] = [date.getHours(), date.getMinutes(), date.getSeconds()];

let monthCorrected = date.getMonth() + 1; 

</script>

 <div id="lightThemeDiv">
  <button id="lightThemebutton" onclick="myFunction()">Light / Dark Theme</button>
</div>


</body>
</html>
